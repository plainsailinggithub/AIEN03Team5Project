{% extends "aien.html" %}
{% block style %}

<style>
    h2{
      text-align:center;
    }
    .t1{
      width:800px;
      margin:0 auto;
    }
    #textarea1{
      width:600px;height:400px;
    }
    #textarea2{
      width:600px;height:75px;
    }
    #textarea3{
      width:175px;height:30px;
    }  
    #tabs{
      float:left;
      width:300px;
      height:500px;
    }        
</style>
{% endblock %}

{% block left %}
    <h2>訊息區</h2>
    <form method="POST">
        <div id="tabs">
            <ul>
              <li><a href="#tabs-1">訊息列表</a></li>
              <li><a href="#tabs-2">好友列表</a></li>
            </ul>
            <div id="tabs-1">
                <div class="form-group">
                    <label for="exampleFormControlInput1">搜尋訊息</label>
                    <input type="email" class="form-control" id="" placeholder="name@example.com">
                </div>
                <div class="form-group">
                  <label for="exampleFormControlSelect1">Example select</label>
                  <select class="form-control" id="exampleFormControlSelect1">
                    <option>1</option>
                    <option>2</option>
                    <option>3</option>
                    <option>4</option>
                    <option>5</option>
                  </select>
                </div>
                </div>
        

            <div id="tabs-2">  
                <div class="form-group" id="friends">
                <input type="text" class="form-control" id="addfriend"  placeholder="搜尋好友">
                    <!-- <select multiple class="form-control" id="friends">
                      <option id="op1">ryan</option>
                      <option id="op2">wang</option>
                      <option id="op3">cheng</option>
                      <option id="op4">liu</option>
                      <option id="op5">su</option>
                      <option id="op6">su</option>
                      <option id="op7">su</option>
                    </select> -->
                </div>
  
            </div>
           
          </div>
{% endblock %}
{% block middle %}

            <div class="form-group t1">
              <label for="exampleFormControlTextarea1">訊息視窗</label>
              <textarea class="form-control" id="textarea1" name="textarea1" readonly="readonly">
              </textarea>
            </div>
            <div class="form-group t1">
              <textarea class="form-control" id="textarea2" name="textarea2" autofocus></textarea>
              <label for="exampleFormControlTextarea1">輸入視窗</label>
            </div>
          
          </form>


{% endblock %}

{% block scripts %}
<script>
    $( function() {
      $( "#tabs" ).tabs();
    } );
</script>
<script>
    $(document).ready(function(){
        // $('#leftnav').load('partial/nav.html');
        $('#textarea2').keydown(function () {
            if (event.keyCode == 13 && event.shiftKey){
                $(this).val($(this).val())    //設定按下shift換行
            }else if (event.keyCode == 13) {
                var textset= $('#textarea2').val();
                var datas = {
                    "name":"angeljaina",
                    "message":textset,
                    "targetid":"3",
                    "message":"",
                } 
                event.preventDefault();                
                if ($('#textarea2').val() == ("" | " ")){
                    return none
                }else{
                    if($('#textarea1').val() == ("" | " ")){
                        $('#textarea1').html(textset)
                    }else{
                        $('#textarea1').html( $('#textarea1').html()+ "\r" + textset )
                    };
                    $('#textarea2').val("")
                    $.post('/api/msg/',datas,function(data){
                    console.log(data)
                    })
                }
            };    
        });
        $("a[href='#tabs-2']").one("click",function(){
            $.getJSON('/api/member/',function(dates){
            $.each(dates,function(index,object){
            $('#friends').append("<div>" + object.name +"</div>")
        })
    })
        })
    // //     var datas = {
    // //         "title":"gogogo",
    // //         "text":"ogogog",
    // //     }    
    // // $.post('api/todo/',data,function(data){
    // //     console.log(data)
    // // })
    // $.getJSON('/api/friendship/',function(dates){
    //     $.each(dates,function(index,object){
    //         console.log(object.name)
    //         console.log(object.friendid)
    //     })
    // })
    //     $.getJSON('/api/member/',function(dates){
    //     $.each(dates,function(index,object){
    //         console.log(object.name)
    //         console.log(object.email)
    //         console.log(object.password)

    //     })
    // })
    // $.getJSON('/api/member/',function(dates){
    //         $.each(dates,function(index,object){
    //         $('#friends').append(object.name)
    //     })
    // })
    })

</script>    
{% endblock %}